# ADMUX ADX Server Test Environment Configuration

host: localhost
port: 8080
read_timeout: 100ms
write_timeout: 100ms
max_connections: 1000
enable_pprof: true
shutdown_timeout: 30s

logging:
  level: debug
  output: console
  file_path: /app/logs/adx-server.log
  max_size: 100MB
  max_backups: 5
  max_age: 7
  compress: true
  enable_json: false

redis:
  addr: redis://localhost:6379
  password: ""
  db: 0
  pool_size: 10
  min_idle_conns: 2
  dial_timeout: 5s
  read_timeout: 1s
  write_timeout: 1s
  idle_timeout: 300s
  max_retries: 3

monitoring:
  prometheus:
    enabled: true
    endpoint: /metrics
    namespace: admux
    subsystem: adx

  health_check:
    enabled: true
    endpoint: /health
    interval: 30s
    timeout: 5s

  jaeger:
    enabled: false
    endpoint: ""

ssps:
  - id: "xiaomi"
    name: "小米"
    endpoint: "/bid/xiaomi"
    protocol: "openrtb"
    qps_limit: 100
    timeout: 50ms
    enabled: true

  - id: "kuaishou"
    name: "快手"
    endpoint: "/bid/kuaishou"
    protocol: "custom"
    qps_limit: 200
    timeout: 50ms
    enabled: true

bidders:
  - id: "test_dsp"
    name: "测试DSP"
    endpoint: "http://test-dsp.example.com/bid"
    timeout: 100ms
    qps_limit: 50
    enabled: true
    retry_count: 1
    retry_delay: 10ms

s3:
  endpoint: ${S3_ENDPOINT}
  access_key_id: ${S3_ACCESS_KEY_ID}
  secret_access_key: ${S3_SECRET_ACCESS_KEY}
  bucket_name: ${S3_BUCKET_NAME}
  prefix: "adx/dsp/"
  use_ssl: true
  scan_interval: 1m
  region: ${S3_REGION}
